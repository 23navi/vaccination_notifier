<!DOCTYPE HTML>
<html>
<head>
    <title>Vaccination Notifier</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,900" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script type="text/javascript" src="scripts/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="scripts/all-plugins.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js" integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js" integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc" crossorigin="anonymous"></script>
    <script>
        $(function(){
            var state_data_block = "", district_data_block = "";
            $("#location").change(function() {
                if ($("#location option:selected").val() == "district") {
                    $("#location_value").replaceWith($("<select class=\"form-select col-lg-8\" name=\"location_value\" id=\"location_value\" required=\"\"><option value=\"\" disabled selected>Select District</option></select>"));
                    if (district_data_block.trim()) {
                        $("#location_value").append(district_data_block);
                    } else {
                        $.ajax({
                            url: "district_list",
                            type: "get",
                            timeout: 20000,
                            beforeSend: function() {
                                $("#location_value option:selected").text("Loading...");
                            }
                        })
                            .done((result) => {
                                if (result) {
                                    $("#location_value option:selected").text("Select District");
                                    $.each(result, (i, stateObj) => {
                                        let div_state_data = "<option value=" + stateObj.state_id + " disabled>" + stateObj.state_name + "</option>";
                                        $("#location_value").append(div_state_data);
                                        district_data_block = district_data_block + div_state_data;
                                        $.each(stateObj.districts, (j, districtObj) => {
                                            let div_district_data = "<option value=" + districtObj.district_id + ">" + districtObj.district_name + "</option>";
                                            $("#location_value").append(div_district_data);
                                            district_data_block = district_data_block + div_district_data;
                                        });
                                    });
                                } else {
                                    alert("Unable to fetch data at this time");
                                }
                            })
                            .fail(function (jqXHR, textStatus, error) { alert("Unable to fetch data at this time | " + textStatus + " | " + error); });
                    }
                } else if ($("#location option:selected").val() == "pincode") {
                    $("#location_value").replaceWith($("<input class=\"form-control\" type=\"number\" name=\"location_value\" id=\"location_value\" placeholder=\"Pincode\" required=\"\" autofocus=\"\">"));
                }
            });
        });
    </script>
</head>

<body class="text-center" data-new-gr-c-s-check-loaded="14.1008.0" data-gr-ext-installed="">

<main role="main" class="container">
    <div class="my-3 p-5 bg-white rounded shadow-sm">
        <div class="text-center mb-4">
            <h1 class="h3 mb-3 font-weight-normal">Vaccine Availability Notifier</h1>
        </div>
        <form action="/action" method="POST">
            <p>Subscribe to receive
                <select id="frequency" name="frequency">
                    <option value="every hour">Hourly</option>
                    <option value="every 3 hours">Every 3 hours</option>
                    <option value="every 6 hours">Every 6 hours</option>
                    <option value="every 12 hours">Every 12 hours</option>
                    <option value="every day" selected>Daily</option>
                </select>
                email notifications about vaccination availability near you
            </p>
            <div class="form-row">
                <div class="form-group col-sm-5">
                    <label class="sr-only" for="email">Email</label>
                    <input class="form-control" type="email" name="email" id="email" placeholder="Email address" required="" autofocus="">
                </div>
                <div class="form-group col-sm-2">
                    <label class="sr-only" for="">Age</label>
                    <input class="form-control" type="number" name="age" id="age" placeholder="Age" required="" autofocus="">
                </div>
                <div class="form-group col-md-5">
                    <div class="input-group">
                        <select class="form-select col-lg-4" id="location" name="location">
                            <option value="pincode" selected>Pincode</option>
                            <option value="district">District</option>
                        </select>
                        <label class="sr-only" for="location_value" id="location_value_label">Pincode: </label>
                        <input class="form-control" type="number" name="location_value" id="location_value" placeholder="Pincode" required="" autofocus="">
                    </div>
                </div>
            </div>
            <input class="btn btn-sm btn-primary" type="submit" name="subscribe" value="Subscribe">
            <input class="btn btn-sm btn-secondary" type="submit" name="unsubscribe" value="Unsubscribe">
        </form>
    </div>

    <!-- <div class="my-3 p-5 bg-white rounded shadow-sm">
        <div class="text-center mb-4">
            <h1 class="h3 mb-3 font-weight-normal">Check Vaccine Availability</h1>
            <p>Check vaccination details near you</p>
        </div>
        <form action="/check_location" method="GET">
            <div class="form-group">
                <label class="sr-only" for="location">Select location:</label>
                <select id="location" name="location">
                    <option value="pincode">Pincode</option>
                    <option value="district">District</option>
                    <option value="state">State</option>
                </select>
            </div>
            <div class="form-group">
                <label class="sr-only" for="location_value" id="location_value_label">Pincode: </label>
                <input class="form-control" name="location_value" id="location_value" placeholder="Pincode">
            </div>
            <input class="btn btn-sm btn-primary" type="submit" name="check_availability" value="Check availability">

        </form>
    </div> -->
</main>

</body>
</html>